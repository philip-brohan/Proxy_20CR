
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to reproduce and extend this work &#8212; Machine Learning for Data Assimilation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">ML for DA</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to reproduce and extend this work</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-reproduce-and-extend-this-work">
<h1>How to reproduce and extend this work<a class="headerlink" href="#how-to-reproduce-and-extend-this-work" title="Permalink to this headline">¶</a></h1>
<p>This project is designed to be easy to reproduce and extend. Everything involved is kept under version control in a <a class="reference external" href="https://en.wikipedia.org/wiki/Git">git repository</a>. The repository is hosted on <a class="reference external" href="https://github.com/">GitHub</a> (and the documentation made with <a class="reference external" href="https://pages.github.com/">GitHub Pages</a>). The repository is <a class="reference external" href="https://github.com/philip-brohan/Proxy_20CR">https://github.com/philip-brohan/Proxy_20CR</a>; it contains everything you need to reproduce or extend this work.</p>
<p>If you are familiar with GitHub, you already know what to do (fork or clone <a class="reference external" href="https://github.com/philip-brohan/Proxy_20CR">the repository</a>): If you’d prefer not to bother with that, you can download the whole thing as <a class="reference external" href="https://github.com/philip-brohan/Proxy_20CR/archive/master.zip">a zip file</a>.</p>
<p>As well as downloading the software, some setup is necessary to run it successfully:</p>
<p>These scripts need to know where to put their output files. They rely on an environment variable <code class="docutils literal notranslate"><span class="pre">SCRATCH</span></code> - set this variable to a directory with plenty of free disc space.</p>
<p>These scripts will only work in a environment with the appropriate software and libraries available. I use <a class="reference external" href="https://docs.conda.io/en/latest/">conda</a> to manage the required environment - which is specified in a yaml file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">:</span> <span class="n">ProxyR</span>
<span class="n">channels</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">defaults</span>
  <span class="o">-</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span>
<span class="n">dependencies</span><span class="p">:</span>
<span class="c1"># Basics</span>
  <span class="o">-</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.9</span>
  <span class="o">-</span> <span class="n">numpy</span><span class="o">=</span><span class="mf">1.19.5</span> <span class="c1"># tf-graphics requires this old version</span>
  <span class="o">-</span> <span class="n">iris</span><span class="o">=</span><span class="mf">3.0</span>
  <span class="o">-</span> <span class="n">cmocean</span><span class="o">=</span><span class="mf">2.0</span>
  <span class="o">-</span> <span class="n">parallel</span>
<span class="c1"># ML model building and diagnostics</span>
<span class="c1"># If you don&#39;t have a GPU, tensorflow-eigen might be faster</span>
  <span class="o">-</span> <span class="n">tensorflow</span><span class="o">-</span><span class="n">gpu</span><span class="o">=</span><span class="mf">2.4</span><span class="o">.*</span>
  <span class="o">-</span> <span class="n">tensorflow</span><span class="o">-</span><span class="n">probability</span><span class="o">=</span><span class="mf">0.12</span><span class="o">.*</span>
<span class="c1"># openexr is not used, but tf-graphics won&#39;t install without it (known bug). </span>
  <span class="o">-</span> <span class="n">openexr</span><span class="o">=</span><span class="mf">2.5</span><span class="o">.*</span>
  <span class="o">-</span> <span class="n">openexr</span><span class="o">-</span><span class="n">python</span><span class="o">=</span><span class="mf">1.3</span><span class="o">.*</span>
<span class="c1"># Code formatter</span>
  <span class="o">-</span> <span class="n">black</span><span class="o">=</span><span class="mf">20.</span><span class="o">*</span>
<span class="c1"># Documentation processor</span>
  <span class="o">-</span> <span class="n">sphinx</span><span class="o">=</span><span class="mf">4.4</span><span class="o">.*</span>
<span class="c1"># Some packages are only available via pip</span>
  <span class="o">-</span> <span class="n">pip</span>
  <span class="o">-</span> <span class="n">pip</span><span class="p">:</span>
  <span class="c1"># Philip&#39;s library for Reanalysis data handling</span>
    <span class="o">-</span> <span class="n">git</span><span class="o">+</span><span class="n">ssh</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">philip</span><span class="o">-</span><span class="n">brohan</span><span class="o">/</span><span class="n">IRData</span><span class="o">.</span><span class="n">git</span><span class="o">@</span><span class="mi">068</span><span class="n">a6a55bf5f6f687e0bbd072c7b0fe259884365</span>
  <span class="c1"># Needed by TensorBoard for profiling</span>
    <span class="o">-</span> <span class="n">tensorboard_plugin_profile</span>
  <span class="c1"># For bilinear interpolation</span>
    <span class="o">-</span> <span class="n">tensorflow</span><span class="o">-</span><span class="n">addons</span><span class="o">==</span><span class="mf">0.14</span>
  <span class="c1"># For trilinear interpolation</span>
    <span class="o">-</span> <span class="n">tensorflow</span><span class="o">-</span><span class="n">graphics</span>
</pre></div>
</div>
<p>Install <a class="reference external" href="https://docs.conda.io/en/latest/">anaconda or miniconda</a>, <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/getting-started.html#managing-envs">create and activate the environment in that yaml file</a>, and all the scripts in this repository should run successfully.</p>
<p>The project documentation (these web pages) are included in the repository (in the <a class="reference external" href="https://github.com/philip-brohan/Proxy_20CR/tree/main/docs">docs directory</a>). The documentation is in <a class="reference external" href="https://en.wikipedia.org/wiki/ReStructuredText">reStructuredText</a> format, and uses the <a class="reference external" href="https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html">Sphinx</a> documentation generator.</p>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/reconstructed.png" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="model.html">Details: Building and training the VAE</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="optimiser.html">Details: DA by optimisation in latent space</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="haduk-grid.html">You don't have to start from GCM output - working with haduk-grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversion.html">Assimilating things other than observations - dataset to dataset conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="mslp.html">Not just T2m - assimilating mslp</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi-variable.html">Not just one variable - finding mslp by assimilating wind observations</a></li>
</ul>
<h3><a href="https://github.com/philip-brohan/Proxy_20CR">Get a copy</a></h3>

<ul>
<li><a href="https://github.com/philip-brohan/Proxy_20CR"
           rel="nofollow">Github repository</a></li>
</ul>

<h3>Found a bug, or have a suggestion?</h3>

Please <a href="https://github.com/philip-brohan/Proxy_20CR/issues/new">raise an issue</a>.
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">ML for DA</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to reproduce and extend this work</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>